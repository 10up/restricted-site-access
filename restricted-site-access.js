!function(e,t){"use strict";function i(){l.add_btn=t(r.getElementById("addip")),l.new_ip=r.getElementById("newip"),l.ip_list_wrap=r.getElementById("ip_list"),l.empty_ip=t(r.getElementById("ip_list_empty")),l.restrict_radio=r.getElementById("blog-restricted"),l.table=t(r.getElementById("rsa-send-to-login")).closest("table"),l.redirect_choice=r.getElementById("rsa-redirect-visitor"),l.message_choice=r.getElementById("rsa-display-message"),l.page_choice=r.getElementById("rsa-unblocked-page"),l.redirect_fields=t(r.querySelectorAll(".rsa_redirect_field")).closest("tr"),l.message_field=t(r.getElementById("rsa_message")).closest("tr"),l.page_field=t(r.getElementById("rsa_page")).closest("tr"),null==r.getElementById("blog-restricted")||r.getElementById("blog-restricted").checked||l.table.hide(),r.getElementById("rsa-redirect-visitor").checked||l.redirect_fields.hide(),r.getElementById("rsa-display-message").checked||l.message_field.hide(),r.getElementById("rsa-unblocked-page").checked||l.page_field.hide(),t(r.querySelectorAll("#rsa_handle_fields input")).on("change",function(){l.redirect_choice.checked?l.redirect_fields.show():l.redirect_fields.hide(),l.message_choice.checked?l.message_field.show():l.message_field.hide(),l.page_choice.checked?l.page_field.show():l.page_field.hide()}),t(r.querySelectorAll(".option-site-visibility input")).on("change",function(){l.restrict_radio.checked?l.table.show():l.table.hide()}),l.add_btn.on("click",function(){d(l.new_ip.value)});var e=r.getElementById("rsa_myip");null!==e&&t(e).on("click",function(){d(t(this).data("myip"))}),t(l.ip_list_wrap).on("click",".remove_btn",function(){t(this.parentNode).slideUp(250,function(){t(this).remove()})})}function d(e){if(""==t.trim(e))return!1;var i=600;l.add_btn.attr("disabled","disabled");var d=t(r.querySelectorAll("#ip_list input")),s=0;for(d.length;s<d.length;s++)if(d[s].value==e)return t(d[s]).parent().effect("shake",i),l.add_btn.removeAttr("disabled"),!1;jQuery.post(ajaxurl,{action:"rsa_ip_check",ip_address:e},function(d){if(d)return t(l.new_ip.parentNode).effect("shake",i),l.add_btn.removeAttr("disabled"),!1;var r=l.empty_ip.clone().appendTo(l.ip_list_wrap);return r.children("input").val(e),r.removeAttr("id").slideDown(250),e==l.new_ip.value&&t(l.new_ip).val(""),l.add_btn.removeAttr("disabled"),!0})}var r=e.document,l={add_btn:"",new_ip:"",ip_list_wrap:"",empty_ip:"",restrict_radio:"",table:"",redirect_choice:"",message_choice:"",page_choice:"",redirect_fields:"",message_field:"",page_field:""};i()}(window,jQuery);
